On a glibc system, EAI_NODATA isn't defined unless _GNU_SOURCE is.  The
recommended thing is to use AC_USE_SYSTEM_EXTENSIONS to get all extensions
defined, but that would require fixups in varous other places, so we go for the
smaller change here.

--- krb5-1.10.3/src/lib/krb5/os/hst_realm.c
+++ krb5-1.10.3/src/lib/krb5/os/hst_realm.c
@@ -35,6 +35,8 @@
  * krb5_free_host_realm()
  */
 
+/* We need to have EAI_NODATA and friends declared. */
+#define _GNU_SOURCE
 
 /*
   Figures out the Kerberos realm names for host, filling in a
--- krb5-1.10.3/src/lib/krb5/os/localaddr.c
+++ krb5-1.10.3/src/lib/krb5/os/localaddr.c
@@ -33,6 +33,9 @@
  * XNS support is untested, but "Should just work".  (Hah!)
  */
 
+/* We need to have EAI_NODATA and friends declared. */
+#define _GNU_SOURCE
+
 #include "k5-int.h"
 
 #if !defined(_WIN32)
--- krb5-1.10.3/src/lib/krb5/os/sendto_kdc.c
+++ krb5-1.10.3/src/lib/krb5/os/sendto_kdc.c
@@ -27,6 +27,9 @@
 /* Send packet to KDC for realm; wait for response, retransmitting
  * as necessary. */
 
+/* We need to have EAI_NODATA and friends declared. */
+#define _GNU_SOURCE
+
 #include "fake-addrinfo.h"
 #include "k5-int.h"
 
--- krb5-1.10.3/src/util/support/fake-addrinfo.c
+++ krb5-1.10.3/src/util/support/fake-addrinfo.c
@@ -101,6 +101,9 @@
  *   these functions, and throw all this away.  Pleeease?  :-)
  */
 
+/* We need to have EAI_NODATA and friends declared. */
+#define _GNU_SOURCE
+
 #include "port-sockets.h"
 #include "socket-utils.h"
 #include "k5-platform.h"
